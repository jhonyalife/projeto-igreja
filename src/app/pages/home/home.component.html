<!-- <ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "ball-scale-multiple" [fullScreen] = "true"></ngx-spinner> -->

<section class="w-ful p-8 bg-black">
  <img
    class="object-none w-full"
    style="max-height: 14rem"
    src="../../../assets/imgs/igreja.jpeg"
    alt="catecumenato"
  />
</section>
<div class="max-w-screen-lg m-auto">
  <section class="p-2 w-full">
    <div
      class="m-auto max-w-screen-lg p-4 rounded-lg bg-gray-50 overflow-hidden shadow-md mt-8"
    >
      <div class="flex flex-col gap-2">
        <div class="flex items-center justify-center">
          <h3 class="text-gray-400 text-4xl text-center p-4 uppercase">
            Realize sua busca por filtros
          </h3>
          <svg
            class="w-6 h-6"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 512 512"
          >
            <path
              d="M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"
            />
          </svg>
        </div>
        <form action="" [formGroup]="form" class="flex gap-5 flex-col md:m-auto">
          <div class="flex-col md:flex-row flex gap-4 md:m-auto md:justify-center md:items-center">
            <div class="form-group">
              <label for="tema" class="block text-gray-700 text-sm font-bold"
                >Tema:</label
              >
              <input
                type="text"
                id="tema"
                formControlName="tema"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-gray-400"
                placeholder="Pesquise um tema..."
              />
            </div>
            <div class="form-group">
              <label
                for="tempos-liturgicos"
                class="block text-gray-700 text-sm font-bold"
                >Tempos Catecumenato:</label
              >
              <select
                name="tempos_liturgicos"
                id="tempos-liturgicos"
                formControlName="tempo"
                class="w-full px-3 cursor-pointer py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-gray-400"
              >
                <option value="">Escolha uma opção:</option>
                <option value="pre-catecumenato">Pré-catecumenato</option>
                <option value="catecumenato">Catecumenato</option>
                <option value="purificacao">PURIFICAÇÃO</option>
                <option value="iluminacao">ILUMINAÇÃO</option>
              </select>
            </div>
            <div class="form-group">
              <label
                for="ano-liturgico"
                class="block text-gray-700 text-sm font-bold"
                >Ano Catecumenato:</label
              >
              <select
                name="ano-liturgico"
                id="ano-liturgico"
                formControlName="ano"
                class="w-full px-3 cursor-pointer py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-gray-400"
              >
                <option value="">Escolha uma opção:</option>
                <option value="2024">2024</option>
              </select>
            </div>
            <div class="form-group">
              <label
                for="dataInicio"
                class="block text-gray-700 text-sm font-bold"
                >Data Inicio:</label
              >
              <input
                type="date"
                id="dataInicio"
                formControlName="datainicio"
                class="w-full px-3 py-2 border cursor-pointer border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-gray-400"
                s
              />
            </div>
            <div class="form-group">
              <label for="datafim" class="block text-gray-700 text-sm font-bold"
                >Data Fim:</label
              >
              <input
                type="date"
                id="datafim"
                formControlName="datafim"
                class="w-full px-3 py-2 border cursor-pointer border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-gray-400"
              />
            </div>
          </div>
          <div class="row gap-2 m-auto">
            <button
              type="submit"
              class="bg-red-800 m-auto hover:bg-red-900 text-white font-bold py-2 px-4 rounded-full uppercase focus:outline-none focus:shadow-outline"
              (click)="filter()"
            >
              Pesquisar
            </button>

            <button
              type="submit"
              class="bg-gray-800 m-auto hover:bg-gray-900 text-white font-bold py-2 px-4 rounded-full uppercase focus:outline-none focus:shadow-outline"
              (click)="getAllDados(); reset()"
            >
              Limpar
            </button>
          </div>
        </form>
      </div>
    </div>

    <div class="m-auto max-w-screen-lg py-5 my-8">
      <h2 class="text-gray-400 text-6xl text-center p-4">
        Iniciação à Vida Cristã
      </h2>
      @if (dados.length > 0) { @for (dado of dados; track $index) {
      <div class="p-4 rounded-lg shadow-md bg-gray-50 my-7">
        <div class="flex items-center text-xl text-gray-600 gap-2 mb-4">
          <i class="fa-solid fa-arrow-right"></i>
          <h3 class="uppercase font-bold">{{ dado.nome }}</h3>
        </div>
        <div
          class="text-gray-700 text-base text-justify font-normal leading-relaxed"
        >
          <p class="py-4">
            {{ dado.descricao }}
          </p>

          <table class="w-full mt-4 text-sm text-left text-gray-500 dark:text-gray-400 bg-white rounded-lg shadow-md">
            <thead class="hidden lg:table-header-group">
              <tr class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 rounded-t-lg">
                <th scope="col" class="px-6 py-3">Tema</th>
                <th scope="col" class="px-6 py-3">Tempo</th>
                <th scope="col" class="px-6 py-3">Ano</th>
                <th scope="col" class="px-6 py-3">Data Inicio</th>
                <th scope="col" class="px-6 py-3">Data Fim</th>
                <th scope="col" class="px-6 py-3">Rito</th>
              </tr>
            </thead>
            <tbody>
              @if (dado.temas.length > 0) {
                @for (tema of dado.temas; track $index) {
                  <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-300 lg:table-row flex flex-col lg:flex-row mb-4 lg:mb-0">
                    <td scope="row" class="px-6 py-4 font-medium whitespace-normal uppercase text-gray-600 dark:text-white flex lg:table-cell">
                      <span class="lg:hidden font-bold pr-2">Tema:</span>
                      {{ tema.tema }}
                    </td>
                    <td class="px-6 py-4 uppercase flex lg:table-cell">
                      <span class="lg:hidden font-bold pr-2">Tempo:</span>
                      {{ dado.nome }}
                    </td>
                    <td class="px-6 py-4 flex lg:table-cell">
                      <span class="lg:hidden font-bold pr-2">Ano:</span>
                      {{ tema.ano }}
                    </td>
                    <td class="px-6 py-4 flex lg:table-cell">
                      <span class="lg:hidden font-bold pr-2">Data Inicio:</span>
                      {{ tema.datainicio }}
                    </td>
                    <td class="px-6 py-4 flex lg:table-cell">
                      <span class="lg:hidden font-bold pr-2">Data Fim:</span>
                      {{ tema.datafim }}
                    </td>
                    <td class="px-6 py-4 flex lg:table-cell">
                      <span class="lg:hidden font-bold pr-2">Rito:</span>
                      @if (tema.rito) {
                        <i class="fa-solid fa-wand-magic-sparkles"></i>
                      }
                    </td>
                  </tr>
                }
              } @else {
                <tr class="bg-white border-b p-4 dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-300">
                  <th colspan="6" class="p-4 font-medium text-center whitespace-normal uppercase text-gray-600 dark:text-white">
                    Não há planejamento para o tempo de {{ dado.nome }} ainda...
                  </th>
                </tr>
              }
            </tbody>
          </table>

        </div>
      </div>
      } } @else{
      <h2 class="m-auto text-gray-400 text-6xl text-center p-4">
        Lamento, mas nenhum resultado foi encontrado...
      </h2>
      }
    </div>
  </section>
</div>
